import{a as Ee}from"./chunk-XRNY7PQO.js";import{a as De,b as Ie}from"./chunk-PCZVVUJL.js";import{a as ye,b as Me}from"./chunk-LXHYPSUR.js";import{a as xe,b as we}from"./chunk-HPGSNVA6.js";import"./chunk-BIPPCTC7.js";import{a as fe,b as ke}from"./chunk-XVZX5AK7.js";import"./chunk-H7CAUYCU.js";import{a as Ce,b as ve}from"./chunk-FWZKQPQK.js";import{a as de,b as ue}from"./chunk-2CYF25GH.js";import{a as be,b as _e}from"./chunk-7HJWITEY.js";import{a as ge,b as he}from"./chunk-UKXFJLHS.js";import"./chunk-7ATRLV3C.js";import"./chunk-67IN5H34.js";import"./chunk-VQLCVYY6.js";import"./chunk-CBDDZWNE.js";import"./chunk-TXPNUDZA.js";import"./chunk-2UUDRLX2.js";import"./chunk-WPFIVNXF.js";import{a as pe,b as ce}from"./chunk-D3F32Y46.js";import{b as re,e as F,h as W,o as O}from"./chunk-ZF7WUV5N.js";import"./chunk-EDZVT65L.js";import"./chunk-H5JMWH4I.js";import"./chunk-N2UUSJQ6.js";import{a as Te,b as Se}from"./chunk-ZQ3MGCUH.js";import"./chunk-5ZXBLI6S.js";import"./chunk-S6P5KW7U.js";import"./chunk-7EDGUSU5.js";import"./chunk-DZPODC2B.js";import{b as se}from"./chunk-R6NC2IRR.js";import"./chunk-BODZH67C.js";import"./chunk-GGQ7LRWG.js";import{b as y,d as M}from"./chunk-IDW2C6YA.js";import"./chunk-AYWMBMLY.js";import"./chunk-SDVJRMAJ.js";import"./chunk-VNA4FHC5.js";import{b as S,c as B}from"./chunk-5W5MLR4D.js";import"./chunk-TBYF2LDC.js";import{b as le,c as me}from"./chunk-XJHCGESM.js";import{oa as L,sa as ne}from"./chunk-2EPCOYPN.js";import{i as ee,j as te,k as ie,s as ae,t as oe}from"./chunk-YK3KRMPP.js";import{$ as w,$b as h,Cb as H,Gb as u,Hb as f,Ia as R,Lb as U,Ma as r,Mb as G,Nb as J,R as Q,Ra as b,Tb as I,V as q,Vb as p,Wb as _,Xa as v,Xb as K,Zb as k,_b as g,aa as D,ac as T,bb as C,bc as E,cc as x,dc as X,f as $,g as A,mc as Y,pc as Z,sb as m,tb as s,ub as n,vb as c}from"./chunk-6KZEWCL6.js";import"./chunk-GAL4ENT6.js";var d=class a{constructor(t){this.http=t;this.http.get("/demo/data/tasks.json").toPromise().then(e=>e.data).then(e=>{this.tasks=e,this.taskSource.next(e)})}dialogConfig={visible:!1,header:"",newTask:!1};tasks=[];taskSource=new A(this.tasks);selectedTask=new $;dialogSource=new A(this.dialogConfig);taskSource$=this.taskSource.asObservable();selectedTask$=this.selectedTask.asObservable();dialogSource$=this.dialogSource.asObservable();addTask(t){this.tasks.includes(t)?this.tasks=this.tasks.map(e=>e.id===t.id?t:e):this.tasks=[...this.tasks,t],this.taskSource.next(this.tasks)}removeTask(t){this.tasks=this.tasks.filter(e=>e.id!==t),this.taskSource.next(this.tasks)}onTaskSelect(t){this.selectedTask.next(t)}markAsCompleted(t){this.tasks=this.tasks.map(e=>e.id===t.id?t:e),this.taskSource.next(this.tasks)}showDialog(t,e){this.dialogConfig={visible:!0,header:t,newTask:e},this.dialogSource.next(this.dialogConfig)}closeDialog(){this.dialogConfig={visible:!1},this.dialogSource.next(this.dialogConfig)}static \u0275fac=function(e){return new(e||a)(q(se))};static \u0275prov=Q({token:a,factory:a.\u0275fac})};var Pe=["menu"],je=a=>({"line-through":a}),Ne=()=>({color:"#212121",border:"2px solid var(--surface-border)"});function Ae(a,t){if(a&1&&(s(0,"span",18),c(1,"i",19),p(2),n()),a&2){let e=f().$implicit;r(2),_(e.comments)}}function Re(a,t){if(a&1&&(s(0,"span",18),c(1,"i",20),p(2),n()),a&2){let e=f().$implicit;r(2),_(e.attachments)}}function ze(a,t){if(a&1&&(s(0,"span",21),c(1,"i",22),p(2),n()),a&2){let e=f().$implicit,i=f();r(2),_(i.parseDate(e.startDate))}}function Ve(a,t){if(a&1&&c(0,"p-avatar",23),a&2){let e=t.$implicit;m("image",T("/demo/images/avatar/",e.image))}}function $e(a,t){if(a&1&&c(0,"p-avatar",24),a&2){let e=f().$implicit;I(x(4,Ne)),m("label",T("+ ",e.members.length-4))}}function Qe(a,t){if(a&1){let e=H();s(0,"li",4)(1,"div",5)(2,"p-checkbox",6),u("onChange",function(l){let o=w(e).$implicit,N=f();return D(N.onCheckboxChange(l,o))}),h("ngModelChange",function(l){let o=w(e).$implicit;return g(o.completed,l)||(o.completed=l),D(l)}),n(),s(3,"label",7),p(4),n()(),s(5,"div",8)(6,"div",9),C(7,Ae,3,1,"span",10)(8,Re,3,1,"span",10)(9,ze,3,1,"span",11),n(),s(10,"div",12)(11,"p-avatargroup",13),C(12,Ve,1,2,"p-avatar",14),Y(13,"slice"),C(14,$e,1,5,"p-avatar",15),n(),s(15,"button",16),u("click",function(l){let o=w(e).$implicit,N=f();return D(N.toggleMenu(l,o))}),n(),c(16,"p-menu",17,0),n()()()}if(a&2){let e=t.$implicit,i=f();r(2),m("binary",!0),k("ngModel",e.completed),m("inputId",e.id.toString()),r(),m("ngClass",X(16,je,e.completed)),r(),_(e.name),r(3),m("ngIf",e.comments),r(),m("ngIf",e.attachments),r(),m("ngIf",e.startDate),r(3),m("ngForOf",Z(13,12,e.members,0,4)),r(2),m("ngIf",e&&e.members&&e.members.length>4),r(2),m("popup",!0)("model",i.menuItems)}}var P=class a{constructor(t){this.taskService=t}taskList;title;menu;menuItems=[];clickedTask;ngOnInit(){this.menuItems=[{label:"Edit",icon:"pi pi-pencil",command:()=>this.onEdit()},{label:"Delete",icon:"pi pi-trash",command:()=>this.handleDelete()}]}parseDate(t){return new Date(t).toUTCString().split(" ").slice(1,3).join(" ")}handleDelete(){this.taskService.removeTask(this.clickedTask.id)}toggleMenu(t,e){this.clickedTask=e,this.menu.toggle(t)}onEdit(){this.taskService.onTaskSelect(this.clickedTask),this.taskService.showDialog("Edit Task",!1)}onCheckboxChange(t,e){t.originalEvent.stopPropagation(),e.completed=t.checked,this.taskService.markAsCompleted(e)}static \u0275fac=function(e){return new(e||a)(b(d))};static \u0275cmp=v({type:a,selectors:[["app-task-list"]],viewQuery:function(e,i){if(e&1&&U(Pe,5),e&2){let l;G(l=J())&&(i.menu=l.first)}},inputs:{taskList:"taskList",title:"title"},decls:5,vars:2,consts:[["menu",""],[1,"text-surface-900","dark:text-surface-0","font-semibold","text-lg","mt-8","mb-4","border-b","border-surface-200","dark:border-surface-700","py-4"],[1,"list-none","p-0","m-0"],["class","flex flex-col gap-4 md:flex-row md:items-center p-2 border-b border-surface-200 dark:border-surface-700",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-4","md:flex-row","md:items-center","p-2","border-b","border-surface-200","dark:border-surface-700"],[1,"flex","items-center","flex-1"],[3,"onChange","ngModelChange","binary","ngModel","inputId"],["for","task.id",1,"font-medium","whitespace-nowrap","text-ellipsis","overflow-hidden","ml-2",2,"max-width","500px",3,"ngClass"],[1,"flex","flex-1","gap-4","flex-col","sm:flex-row","sm:justify-between"],[1,"flex","items-center"],["class","flex items-center font-semibold mr-4",4,"ngIf"],["class","flex items-center font-semibold whitespace-nowrap",4,"ngIf"],[1,"flex","items-center","sm:justify-end"],["styleClass","mr-4"],["size","large","shape","circle",3,"image",4,"ngFor","ngForOf"],["shape","circle","size","large","class","bg-blue-500",3,"label","style",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v","text","","rounded","",1,"z-30","ml-auto","sm:ml-0",3,"click"],["styleClass","w-32","appendTo","body",3,"popup","model"],[1,"flex","items-center","font-semibold","mr-4"],[1,"pi","pi-comment","mr-2"],[1,"pi","pi-paperclip","mr-2"],[1,"flex","items-center","font-semibold","whitespace-nowrap"],[1,"pi","pi-clock","mr-2"],["size","large","shape","circle",3,"image"],["shape","circle","size","large",1,"bg-blue-500",3,"label"]],template:function(e,i){e&1&&(s(0,"div")(1,"div",1),p(2),n(),s(3,"ul",2),C(4,Qe,18,18,"li",3),n()()),e&2&&(r(2),K(" ",i.title," "),r(2),m("ngForOf",i.taskList))},dependencies:[oe,ee,te,ie,he,ge,we,xe,ue,de,ve,Ce,M,y,B,S,O,F,W,ae],encapsulation:2,changeDetection:0})};var qe=()=>({height:"150px"}),He=()=>({height:"2.5rem"});function Ue(a,t){if(a&1&&(s(0,"div",20),c(1,"img",21),s(2,"span",22),p(3),n()()),a&2){let e=t.$implicit;r(),m("src",T("/demo/images/avatar/",e.image),R)("alt",e.name),r(2),_(e.name)}}function Ge(a,t){if(a&1&&(s(0,"div",20),c(1,"img",21),s(2,"span",22),p(3),n()()),a&2){let e=t.$implicit;r(),m("src",T("/demo/images/avatar/",e.image),R)("alt",e.name),r(2),_(e.name)}}var j=class a{constructor(t,e,i){this.memberService=t;this.messageService=e;this.taskService=i;this.subscription=this.taskService.selectedTask$.subscribe(l=>this.task=l),this.dialogSubscription=this.taskService.dialogSource$.subscribe(l=>{this.dialogConfig=l,this.dialogConfig.newTask&&(this.new=!0,this.resetTask())})}task;members=[];filteredMembers=[];dialogConfig={header:"",visible:!1};subscription;dialogSubscription;new=!1;ngOnInit(){this.memberService.getMembers().then(t=>this.members=t),this.resetTask()}filterMembers(t){let e=[],i=t.query;for(let l=0;l<this.members.length;l++){let o=this.members[l];o.name?.toLowerCase().indexOf(i.toLowerCase())==0&&e.push(o)}this.filteredMembers=e}save(){this.task.id=Math.floor(Math.random()*1e3),this.messageService.add({severity:"success",summary:"Success",detail:`Task "${this.task.name}" ${this.new?"created":"saved"} successfully.`}),this.taskService.addTask(this.task),this.taskService.closeDialog()}cancelTask(){this.resetTask(),this.taskService.closeDialog()}resetTask(){this.task={id:this.task&&this.task.id?this.task.id:Math.floor(Math.random()*1e3),status:"Waiting"}}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||a)(b(Ee),b(L),b(d))};static \u0275cmp=v({type:a,selectors:[["app-create-task"]],features:[E([L])],decls:29,vars:18,consts:[["styleClass","mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12","contentStyleClass","rounded-b border-t border-surface-200 dark:border-surface-700 p-0",3,"visibleChange","header","visible","modal","dismissableMask"],[1,"p-6"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12"],["for","name",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["id","name","type","text","placeholder","Title","pInputText","",3,"ngModelChange","ngModel"],["for","description",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],[3,"ngModelChange","ngModel"],[1,"col-span-6"],["for","start",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","dateFormat","yy-mm-dd","inputId","start","placeholder","Start Date",3,"ngModelChange","showTime","ngModel"],["for","end",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","dateFormat","yy-mm-dd","inputId","end","placeholder","Due Date",3,"ngModelChange","showTime","ngModel"],["for","members",1,"text-surface-900","dark:text-surface-0","font-semibold","block","mb-2"],["appendTo","body","inputId","members","field","name","placeholder","Choose team members",3,"ngModelChange","completeMethod","ngModel","suggestions","multiple","inputStyle"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"col-span-12","flex","justify-end","mt-6"],["pButton","","pRipple","","outlined","","icon","pi pi-times","label","Cancel",1,"w-32","mr-4",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Save",1,"w-32",3,"click"],[1,"flex","items-center"],[1,"h-8","w-8","mr-2",3,"src","alt"],[1,"text-surface-900","dark:text-surface-0","font-medium"]],template:function(e,i){e&1&&(c(0,"p-toast"),s(1,"p-dialog",0),h("visibleChange",function(o){return g(i.dialogConfig.visible,o)||(i.dialogConfig.visible=o),o}),s(2,"div",1)(3,"p-fluid",2)(4,"div",3)(5,"label",4),p(6,"Task Name"),n(),s(7,"input",5),h("ngModelChange",function(o){return g(i.task.name,o)||(i.task.name=o),o}),n()(),s(8,"div",3)(9,"label",6),p(10,"Description"),n(),s(11,"p-editor",7),h("ngModelChange",function(o){return g(i.task.description,o)||(i.task.description=o),o}),n()(),s(12,"div",8)(13,"label",9),p(14,"Start Date"),n(),s(15,"p-datepicker",10),h("ngModelChange",function(o){return g(i.task.startDate,o)||(i.task.startDate=o),o}),n()(),s(16,"div",8)(17,"label",11),p(18,"Due Date"),n(),s(19,"p-datepicker",12),h("ngModelChange",function(o){return g(i.task.endDate,o)||(i.task.endDate=o),o}),n()(),s(20,"div",3)(21,"label",13),p(22,"Add Team Member"),n(),s(23,"p-autocomplete",14),h("ngModelChange",function(o){return g(i.task.members,o)||(i.task.members=o),o}),u("completeMethod",function(o){return i.filterMembers(o)}),C(24,Ue,4,4,"ng-template",15)(25,Ge,4,4,"ng-template",16),n()(),s(26,"div",17)(27,"button",18),u("click",function(){return i.cancelTask()}),n(),s(28,"button",19),u("click",function(){return i.save()}),n()()()()()),e&2&&(r(),m("header",i.dialogConfig.header||""),k("visible",i.dialogConfig.visible),m("modal",!0)("dismissableMask",!0),r(6),k("ngModel",i.task.name),r(4),I(x(16,qe)),k("ngModel",i.task.description),r(4),m("showTime",!1),k("ngModel",i.task.startDate),r(4),m("showTime",!1),k("ngModel",i.task.endDate),r(4),k("ngModel",i.task.members),m("suggestions",i.filteredMembers)("multiple",!0)("inputStyle",x(17,He)))},dependencies:[Se,Te,ne,ke,fe,O,re,F,W,Ie,De,_e,be,M,y,Me,ye,me,le,ce,pe,S],encapsulation:2})};var We=class a{constructor(t){this.taskService=t;this.subscription=this.taskService.taskSource$.subscribe(e=>this.categorize(e))}subscription;todo=[];completed=[];categorize(t){this.todo=t.filter(e=>e.completed!==!0),this.completed=t.filter(e=>e.completed)}ngOnDestroy(){this.subscription.unsubscribe()}showDialog(){this.taskService.showDialog("Create Task",!0)}static \u0275fac=function(e){return new(e||a)(b(d))};static \u0275cmp=v({type:a,selectors:[["ng-component"]],features:[E([d])],decls:8,vars:2,consts:[[1,"card"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-surface-900","dark:text-surface-0","text-xl","font-semibold"],["pButton","","pRipple","","outlined","","icon","pi pi-plus","label","Create Task",1,"font-semibold",3,"click"],["title","ToDo",3,"taskList"],["title","Completed",3,"taskList"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),p(3,"Task List"),n(),s(4,"button",3),u("click",function(){return i.showDialog()}),n()(),c(5,"app-task-list",4)(6,"app-task-list",5),n(),c(7,"app-create-task")),e&2&&(r(5),m("taskList",i.todo),r(),m("taskList",i.completed))},dependencies:[M,y,P,j,B,S],encapsulation:2})};export{We as TaskList};
